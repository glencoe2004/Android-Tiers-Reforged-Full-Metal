<?xml version="1.0" encoding="utf-8" ?>
<Defs>

	<ThingDef ParentName="DrugBase">
		<defName>ATR_FractalPill</defName>
		<label>Fractal pill</label>
		<description>Like all things related to archotechs, it is impossible to know what exactly this is. The only remnants of those warped by fractal power, these small pill-like objects can imbue a new host with that same fractal power. Rumor has it that archotechs whisper in the ears of those warped by it, offering a glimpse of true power. \n\nIn organics, this leads to warping of the mind and flesh - some believe it is enlightenment, others nightmares incarnate. It violently expunges diseases and mutates the very essence of its host. The vast majority of the time this will eventually lead to becoming a horrific monster, but madmen rant about the possibility for "the chosen" to "ascend to blessed fragmentation" instead.\n\nIn mechanicals, fractal warping has a much more tame effect. It integrates with all systems and provides numerous beneficial effects ranging from enhanced cognition to ridiculous temperature tolerance.</description>
		<graphicData>
			<texPath>Things/Drugs/FractalP</texPath>
			<graphicClass>Graphic_StackCount</graphicClass>
		</graphicData>
		<socialPropernessMatters>false</socialPropernessMatters>
		<rotatable>false</rotatable>
		<stackLimit>10</stackLimit>
        <useHitPoints>false</useHitPoints>
		<statBases>
			<MarketValue>1200</MarketValue>
			<Mass>0.4</Mass>
            <DeteriorationRate>0</DeteriorationRate>
            <Flammability>0</Flammability>
		</statBases>
		<techLevel>Ultra</techLevel>
		<ingestible>
			<foodType>Processed</foodType>
			<drugCategory>Medical</drugCategory>
			<ingestHoldUsesTable>false</ingestHoldUsesTable>
			<ingestCommandString>Consume {0}</ingestCommandString>
			<ingestReportString>Consuming {0}.</ingestReportString>
			<useEatingSpeedStat>false</useEatingSpeedStat>
			<outcomeDoers>
				<li Class="ATReforged.IngestionOutcomeDoer_MechOrganicDifferentEffects">
					<organicEffect>ATR_FractalPillOrganic</organicEffect>
                    <organicSeverity>0.25</organicSeverity>
					<mechanicalEffect>ATR_FractalPillMechanical</mechanicalEffect>
					<mechanicalSeverity>0.05</mechanicalSeverity>
				</li> 	
			</outcomeDoers>
		</ingestible>
		<comps>
			<li Class="CompProperties_Drug">
				<listOrder>806</listOrder>
			</li>
		</comps>
	</ThingDef>

	<HediffDef>
		<defName>ATR_FractalPillOrganic</defName>
		<hediffClass>ATReforged.Hediff_Fractal</hediffClass>
		<label>Fractal Warping</label>
		<description>Fractal warping of the body. As flesh toughens and takes on metallic qualities and the mind rots and yet also grows, a uniquely enlightening and agonizing perspective takes hold. This is the archotech's work, but for what inscrutable purpose was this warping manifested?</description>
		<comps>
            <li Class="HediffCompProperties_HealPermanentWounds" />
		</comps>
		<defaultLabelColor>(255, 130, 0)</defaultLabelColor>
		<scenarioCanAdd>true</scenarioCanAdd>
        <initialSeverity>0.25</initialSeverity>
		<maxSeverity>0.5</maxSeverity>
		<isBad>true</isBad>
		<stages>	
			<li>
				<minSeverity>0.0</minSeverity>
				<label>Transcendant</label>
				<painFactor>2</painFactor>
				<vomitMtbDays>16</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.6</offset>
					</li>
					<li>
						<capacity>Talking</capacity>
						<offset>0.8</offset>
					</li>
                    <li>
                        <capacity>Sight</capacity>
                        <offset>0.8</offset>
                    </li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>0.2</offset>
					</li>
					<li>
						<capacity>BloodFiltration</capacity>
						<offset>1</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>1</GlobalLearningFactor>
					<MentalBreakThreshold>0.16</MentalBreakThreshold>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.05</minSeverity>
				<label>Blessed</label>
				<painFactor>1.5</painFactor>
				<vomitMtbDays>16</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.3</offset>
					</li>
					<li>
						<capacity>Talking</capacity>
						<offset>0.4</offset>
					</li>
                    <li>
                        <capacity>Sight</capacity>
                        <offset>0.4</offset>
                    </li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>0.2</offset>
					</li>
					<li>
						<capacity>BloodFiltration</capacity>
						<offset>1</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.5</GlobalLearningFactor>
					<MentalBreakThreshold>0.08</MentalBreakThreshold>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.15</minSeverity>
				<label>Gifted</label>
				<painFactor>1.25</painFactor>
				<vomitMtbDays>8</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.15</offset>
					</li>
					<li>
						<capacity>Talking</capacity>
						<offset>0.2</offset>
					</li>
                    <li>
                        <capacity>Sight</capacity>
                        <offset>0.2</offset>
                    </li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>0.2</offset>
					</li>
					<li>
						<capacity>BloodFiltration</capacity>
						<offset>1</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.25</GlobalLearningFactor>
					<MentalBreakThreshold>0.04</MentalBreakThreshold>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.25</minSeverity>
				<label>Balanced</label>
				<vomitMtbDays>4</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.15</offset>
					</li>
					<li>
						<capacity>Talking</capacity>
						<offset>0.2</offset>
					</li>
                    <li>
                        <capacity>Sight</capacity>
                        <offset>0.2</offset>
                    </li>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.2</offset>
					</li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>0.2</offset>
                    </li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>0.2</offset>
					</li>
					<li>
						<capacity>BloodFiltration</capacity>
						<offset>1</offset>
					</li>
				</capMods>
			</li>
			<li>
				<minSeverity>0.35</minSeverity>
				<label>Tainted</label>
				<painFactor>0.75</painFactor>
				<vomitMtbDays>2</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.15</offset>
					</li>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.2</offset>
					</li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>0.2</offset>
                    </li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>0.2</offset>
					</li>
					<li>
						<capacity>BloodFiltration</capacity>
						<offset>1</offset>
					</li>
				</capMods>
                <statFactors>
                    <IncomingDamageFactor>0.8</IncomingDamageFactor>
                </statFactors>
			</li>
			<li>
				<minSeverity>0.45</minSeverity>
				<label>Vile</label>
				<painFactor>0.5</painFactor>
				<vomitMtbDays>1</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.3</offset>
					</li>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.4</offset>
					</li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>0.4</offset>
                    </li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>0.2</offset>
					</li>
					<li>
						<capacity>BloodFiltration</capacity>
						<offset>1</offset>
					</li>
				</capMods>
                <statFactors>
                    <IncomingDamageFactor>0.6</IncomingDamageFactor>
                </statFactors>
			</li>
			<li>
				<minSeverity>0.5</minSeverity>
				<label>Corrupted</label>
			</li>
		</stages>
	</HediffDef>

	<!-- HediffMechanical -->
	
	<HediffDef>
		<defName>ATR_FractalPillMechanical</defName>
		<hediffClass>HediffWithComps</hediffClass>
		<label>Fractal Integration</label>
		<description>Fractal integration into the systems of the android, changing and modifying them to improve function. Substantially improves the capabilities of the android.</description>
		<defaultLabelColor>(0.9,0.9,1)</defaultLabelColor>
		<scenarioCanAdd>true</scenarioCanAdd>
		<maxSeverity>1.0</maxSeverity>
		<isBad>false</isBad>
		<comps>
            <li Class="HediffCompProperties_HealPermanentWounds" />
		</comps>
		<stages>
			<li>
				<label>No Effect</label>
				<becomeVisible>false</becomeVisible>
			</li>

			<li>
				<minSeverity>0.05</minSeverity>
				<label>I</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.02</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.02</offset>
					</li>
				</capMods>
			</li>
			<li>
				<minSeverity>0.1</minSeverity>
				<label>II</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.1</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.1</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.05</GlobalLearningFactor>
					<WorkSpeedGlobal>0.05</WorkSpeedGlobal>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.15</minSeverity>
				<label>III</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.15</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.15</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.1</GlobalLearningFactor>
					<WorkSpeedGlobal>0.1</WorkSpeedGlobal>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.2</minSeverity>
				<label>IV</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.20</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.20</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.15</GlobalLearningFactor>
					<WorkSpeedGlobal>0.20</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.03</MentalBreakThreshold>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.25</minSeverity>
				<label>V</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.25</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.25</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.2</GlobalLearningFactor>
					<WorkSpeedGlobal>0.25</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.05</MentalBreakThreshold>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.3</minSeverity>
				<label>VI</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.35</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.35</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.3</GlobalLearningFactor>
					<WorkSpeedGlobal>0.35</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.07</MentalBreakThreshold>
					<ArmorRating_Blunt>0.05</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.05</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.35</minSeverity>
				<label>VII</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.45</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.45</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.4</GlobalLearningFactor>
					<WorkSpeedGlobal>0.45</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<ArmorRating_Blunt>0.07</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.1</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.4</minSeverity>
				<label>VIII</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.55</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.55</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.1</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.5</GlobalLearningFactor>
					<WorkSpeedGlobal>0.55</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<ArmorRating_Blunt>0.1</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.15</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.45</minSeverity>
				<label>IX</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.65</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.65</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.2</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.6</GlobalLearningFactor>
					<WorkSpeedGlobal>0.65</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<ArmorRating_Blunt>0.20</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.25</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.5</minSeverity>
				<label>X</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.75</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.75</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.3</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.70</GlobalLearningFactor>
					<WorkSpeedGlobal>0.75</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<ArmorRating_Blunt>0.25</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.30</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.55</minSeverity>
				<label>XI</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.85</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.85</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.4</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.8</GlobalLearningFactor>
					<WorkSpeedGlobal>0.85</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<ArmorRating_Blunt>0.30</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.35</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.6</minSeverity>
				<label>XII</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>1</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>1</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.5</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>1</GlobalLearningFactor>
					<WorkSpeedGlobal>1</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<ArmorRating_Blunt>0.40</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.45</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.65</minSeverity>
				<label>XIII</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>1.2</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>1.2</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.6</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>1.2</GlobalLearningFactor>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<WorkSpeedGlobal>1.2</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.45</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.5</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.7</minSeverity>
				<label>XIV</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>1.5</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>1.5</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.8</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>1.4</GlobalLearningFactor>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<WorkSpeedGlobal>1.4</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.45</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.5</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.75</minSeverity>
				<label>XV</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>1.7</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>1.7</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>1</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>1.6</GlobalLearningFactor>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<WorkSpeedGlobal>1.6</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.45</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.55</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.8</minSeverity>
				<label>XVI</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>2</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>2</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>1.4</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>2</GlobalLearningFactor>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<WorkSpeedGlobal>2</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.5</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.55</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.85</minSeverity>
				<label>XVII</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>2.4</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>2.4</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>1.8</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>2.2</GlobalLearningFactor>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<WorkSpeedGlobal>2.2</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.55</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.55</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.9</minSeverity>
				<label>XVIII</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>2.8</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>2.8</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>2.2</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>2.5</GlobalLearningFactor>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<WorkSpeedGlobal>2.5</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.55</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.55</ArmorRating_Sharp>
				</statOffsets>
			</li>	
			<li>
				<minSeverity>0.95</minSeverity>
				<label>XIX</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>3.2</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>3.2</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>2.6</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>3</GlobalLearningFactor>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
					<WorkSpeedGlobal>2.8</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.55</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.55</ArmorRating_Sharp>
				</statOffsets>
			</li>		
			<li>
				<minSeverity>1</minSeverity>
				<label>Ultima</label>
				<hungerRateFactorOffset>-0.25</hungerRateFactorOffset>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>5</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>5</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>4</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>4</GlobalLearningFactor>
					<MentalBreakThreshold>-50</MentalBreakThreshold>
					<WorkSpeedGlobal>4</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.65</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.75</ArmorRating_Sharp>
					<ATR_MaintenanceRetention>5</ATR_MaintenanceRetention>
				</statOffsets>
			</li>
		</stages>
	</HediffDef>
	

</Defs>
